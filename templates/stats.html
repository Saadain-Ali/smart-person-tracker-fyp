{% extends 'base.html' %}

{% block title %} Stats {% endblock %}
{% include 'header.html' %}
{%block head%}
<!-- <link rel="preconnect" href="https://fonts.gstatic.com"> -->
<!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500&display=swap" rel="stylesheet"> -->

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

<link href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css" rel="stylesheet"
  type="text/css" />


<link rel="stylesheet" href="{{ url_for('static', filename='css/mycss.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/glyphicons.css') }}">

{% endblock %}


{% block navbar %}
{%include 'nav.html'%}
{% endblock %}

{% block body %}
<br>
<!-- ======= Services Section ======= -->
<section id="services" class="services section-bg">
  <div class="p-3" data-aos="fade-up">

    <div class="section-title">
      <h2>Services</h2>
      <p>Find and query student behaviour</p>
    </div>

    <div class="row">
      <!-- navs and tabs -->
      <div class="col-lg-4 col-md-12 ml-auto col-xl-4 mr-auto">
        <div class="card">
          <!-- Tabs with Background on Card -->
          <div class="row">
            <div class="col-lg-4 col-md-12 col-sm-12 col-md-2 col-12 card-header" style="min-height:500px">
              <ul class="nav nav-tabs flex-column nav-tabs-neutral justify-content-evenly" style="height:500px; background-color: #E63946;" role="tablist"
              >
                <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#home1" role="tab" aria-selected="true">Find All</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#profile1" role="tab" aria-selected="false">Find Friends</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#messages1" role="tab" aria-selected="false">Clocked Time</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#settings1" role="tab" aria-selected="false">Last Seen</a>
                </li>

                <!-- Find students at location -->
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#findStudLoc" role="tab" aria-selected="true">At
                    Location</a>
                </li>

                <!-- Find Route -->
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#FindRoute" role="tab" aria-selected="false">Find Route</a>
                </li>

                

              </ul>
            </div>
            <div class="col-lg-8 col-md-12 card-body m-auto">
              <!-- Tab panes -->
              <div class="tab-content text-center">

                <!-- find max occurence scene @ location -->
                <div class="tab-pane active" id="home1" role="tabpanel">
                  <div class="container">
                    <form class="form form-max" role="form" _lpchecked="1">
                      <h2 class="form ">Find all occurence of a Student</h2>
                      <input type="text" id="inputUsername" name="username" class="form-control" placeholder="SID"
                        required="" autofocus="" autocomplete="off"
                        style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAAXNSR0IArs4c6QAAAPhJREFUOBHlU70KgzAQPlMhEvoQTg6OPoOjT+JWOnRqkUKHgqWP4OQbOPokTk6OTkVULNSLVc62oJmbIdzd95NcuGjX2/3YVI/Ts+t0WLE2ut5xsQ0O+90F6UxFjAI8qNcEGONia08e6MNONYwCS7EQAizLmtGUDEzTBNd1fxsYhjEBnHPQNG3KKTYV34F8ec/zwHEciOMYyrIE3/ehKAqIoggo9inGXKmFXwbyBkmSQJqmUNe15IRhCG3byphitm1/eUzDM4qR0TTNjEixGdAnSi3keS5vSk2UDKqqgizLqB4YzvassiKhGtZ/jDMtLOnHz7TE+yf8BaDZXA509yeBAAAAAElFTkSuQmCC&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%; cursor: auto;">
                      <br>
                      <button class="btn mybtn btn-block findMax" type="submit">
                        <span class="glyphicon glyphicon-search"></span>
                        Find</button>
                    </form>
                  </div>
                </div>

                <!-- Find where with friend -->
                <div class="tab-pane" id="profile1" role="tabpanel">
                  <div class="container">
                    <form class="form-friendOccur form">
                      <h2>Find student friend</h2>
                      <div class="form-group">
                        <input type="text" class="form-control" name="sid1" id="sid1" placeholder="Student 1" required
                          autofocus>
                      </div>
                      <br>
                      <div class="form-group">
                        <input type="text" class="form-control" name="sid2" id="sid2" placeholder="Student 2" autofocus
                          required>
                      </div>
                      <br>
                      <button type="submit" class="btn mybtn findFriendOccur">
                        <span class="glyphicon glyphicon-search"></span>
                        Find</button>
                    </form>
                    <br>
                    <!-- <div id="successAlert" class="alert alert-success" role="alert" style="display:none;"></div>
                         <div id="errorAlert" class="alert alert-danger" role="alert" style="display:none;"></div> -->
                  </div>
                </div>


                <!-- In Out  -->
                <div class="tab-pane" id="messages1" role="tabpanel">
                  <div class="container">
                    <form class="form-Clocked form" role="form">
                      <h2>Find Student Clocked Time</h2>
                      <div class="form-group">
                        <input type="text" class="form-control" name="sid" id="sidClocked" placeholder="SID" required
                          autofocus>
                        <br>
                        <span class="date_picker"></span>
                      </div>
                      <br>
                      <button type="submit" class="btn findClocked mybtn">
                        <span class="glyphicon glyphicon-search p-2"></span>
                        Find</button>
                    </form>

                    <!-- <div id="successAlert" class="alert alert-success" role="alert" style="display:none;"></div>
                         <div id="errorAlert" class="alert alert-danger" role="alert" style="display:none;"></div> -->
                  </div>
                </div>


                <!-- Find student last seen -->
                <div class="tab-pane" id="settings1" role="tabpanel">
                  <div class="container">
                    <form class="form form-lastseen" role="form">
                      <h2 class="form ">Find student last seen</h2>
                      <input type="text" name="username" class="form-control" placeholder="SID" required autofocus>
                      <br>
                      <span class="date_picker"></span>
                      <br>
                      <button class="btn mybtn btn-block" type="submit">
                        <span class="glyphicon glyphicon-search"></span>
                        Find</button>
                    </form>
                  </div>
                </div>

                <!-- Find students at location -->
                <div class="tab-pane" id="findStudLoc" role="tabpanel">
                  <div class="container">
                    <form class="form form-findAllLoc" role="form">
                      <h2 class="form ">Find students at location</h2>
                      <label>Select Location:</label>
                      <br>
                      <select class="location form-select" aria-label="Default select example" name="location"
                        id="FALlocation" required>
                        {% for location in locations %}
                            <option value="{{location}}">{{ location }}</option>
                        {% endfor %}
                        
                      </select>
                      <!-- <input type="text"  name="location" class="form-control" placeholder="Location" required autofocus>      -->
                      <br>
                      <br>
                      <button class="btn mybtn btn-block findAllLoc" type="submit">
                        <span class="glyphicon glyphicon-search"></span>Find
                      </button>
                    </form>
                  </div>
                </div>

                <!-- Find Route -->
                <div class="tab-pane" id="FindRoute" role="tabpanel">
                  <div class="container">
                    <form class="form form-route" role="form">
                      <h2 class="form ">Find Route</h2>
                      <input type="text" id="sid" name="sid" class="form-control" placeholder="SID" required autofocus>
                      <br>
                      <span class="date_picker"></span>
                      <!-- <input type="text" id="date" name="date" class="form-control" placeholder="Date" required autofocus>      -->
                      <br>
                      <button class="btn mybtn btn-block findRoute" type="submit">
                        <span class="glyphicon glyphicon-search"></span>
                        Find</button>
                    </form>
                  </div>
                </div>


               

              </div>
            </div>
          </div>
          <!-- End Tabs on plain Card -->
        </div>

      </div>
      <!-- =================== -->

      <!-- charts and table -->
      <div class="col-lg-8 col-md-12 d-flex align-items-stretch" data-aos="zoom-in" data-aos-delay="100">
        <div class="card p-3" style="margin-bottom:20px; min-height:500px">
         <div class="container-fluid">
          <div id="successAlert" class="alert fs-3 bg-light card" role="alert"></div>
          <span class="mydata"></span>
          <div id="errorAlert" class="alert alert-danger card" role="alert" style="display:none;"></div>
          <br><br>
          <div id="chart-area"  style="width: 900px; height: 500px;" class="container"></div>
        </div>
        </div>
      </div>
      <!-- =================== -->
    </div>

  </div>
</section><!-- End Services Section -->

<br><br>
<div class="card p-3 rounded">
  <div>
    <div class="card-header fs-1">
      <span class="align-middle myclr-red">Students</span>
      <form class="form-inline float-right">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <br>
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
    <div class="card-body">
      <table id="myTable" class="table table-striped table-hover table-light fs-5 table-responsive-sm w-100" style="width:100%">

        <thead class="thead-dark fs-4">
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>SID</th>
            <th>Age</th>
            <th>Gender</th>
          </tr>
        </thead>
        <tbody class="fs-5">
          {% for row in students %}
          <tr>
            <td>{{row[1]}}</td>
            <td>{{row[2]}}</td>
            <td>{{row[3]}}</td>
            <td>{{row[0]}}</td>
            <td>{{row[4]}}</td>
            <td>{{row[5]}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

</div>

<br><br>

<div class="card p-3 rounded myDataTable">
  <div class="card-header fs-1">
    <span class="align-middle myclr-red">Finds</span>
  </div>
  <div class="card-body">
    <table id="example" class="display display ttable table-striped table-hover table-light fs-5 table-responsive-sm w-100"
      style="width:100%;">
      <thead class="thead-dark fs-4">
        <tr>
          <th>Student_1</th>
          <th>Student_2</th>
          <th>Location</th>
          <th>Date</th>
          <th>Time</th>
        </tr>
      </thead>

    </table>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"
  integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="{{ url_for('static', filename='js/db-charts.js') }}"></script>
<script src="{{ url_for('static', filename='js/db.js') }}"></script>
{% endblock %}